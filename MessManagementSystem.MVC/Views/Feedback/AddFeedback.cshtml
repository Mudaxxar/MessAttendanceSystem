@model MessManagementSystem.Shared.Models.RequestModels.FeedbackRequestModel
﻿
@{
	Layout = "~/Views/Shared/_DreamLayout.cshtml";
}



<div class="page-wrapper">
	<div class="content">
		<!-- Page Header -->
		<div class="page-header">
			<div class="page-title">
				<h4>Complains & Suggestions</h4>
				<h6>Add Feedback</h6>
			</div>
		</div>

		<!-- Feedback Form -->
		<div class="card">
			<div class="card-body">
				<form id="feedbackForm">
					<div class="row">
						<div class="col-lg-12 col-sm-12 col-12">
							<div class="form-group">
								<label for="feedback">Comments</label>
								<textarea class="form-control" id="feedback" rows="4" placeholder="Write your feedback here..."></textarea>
							</div>
						</div>

						<div class="col-lg-12 text-end">
							<button type="button" class="btn btn-submit" onclick="Save()">Submit</button>
						</div>
					</div>
				</form>
			</div>
		</div>
		<!-- /Feedback Form -->
	</div>
</div>



<script>


		function Save() {

			var isValid = true;
			if ($("#feedback").val() == "" || $("#feedback").val() == null) {
				toastr.error("Comments are required!");
				isValid = false;
			}
			if (isValid) {
				var feedbackData = {

					Comments: $("#feedback").val(),
					UserId : 0
				};
				$.ajax({
					url: '@Url.Action("AddFeedback", "Feedback")',
					type: "POST",
					data: feedbackData,
					success: function (result, status) {
						if (status == "success") {

							if (result.isError === false) {
								toastr.success(result.description);
								Clear();
							}
							else {
								if (result.isError === true) {
									toastr.error(result.description);
								} else {
									toastr.error(result.description);
								}

							}

						}
					},
					error: function (result) {
						toastr.error(result.description);
					},
				});

			}
		}
	function	Clear(){
		$("#feedback").val('');
		}

</script>